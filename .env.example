# Activation Server Environment Variables

# Server Configuration
PORT=8080

# Graceful Shutdown Timeout (default: 30s)
# Time to wait for active requests to complete during shutdown
# Examples: 30s, 1m, 90s
SHUTDOWN_TIMEOUT=30s

# Database Configuration (choose one)
# For SQLite (default - good for self-hosting):
DB_PATH=activations.db
# For PostgreSQL (recommended for cloud deployments):
# DATABASE_URL=postgres://user:password@host:5432/database

# Ed25519 Private Key (generate with: make keygen)
# Base64-encoded private key for signing licenses
PRIVATE_KEY=

# ==========================================
# MODE 1: Direct API Key Delivery (default)
# ==========================================
# Protected API Key (generic - can be for any service)
# This key is encrypted and delivered to activated clients
# Examples: OpenAI, Anthropic, Stripe, your own API, etc.
PROTECTED_API_KEY=

# ==========================================
# MODE 2: Proxy Mode (enhanced security)
# ==========================================
# Enable proxy mode - clients never see the actual API keys
# Licensify acts as a proxy with server-side rate limiting
PROXY_MODE=false

# API Keys for proxy mode (only needed if PROXY_MODE=true)
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-ant-...

# ==========================================
# Email Configuration
# ==========================================
RESEND_API_KEY=re_SEND_API_KEY
FROM_EMAIL=info@acme.com

# ==========================================
# Webhooks (Zapier/Make/n8n Integration)
# ==========================================
# URL to send webhook events (optional)
# WEBHOOK_URL=https://hooks.zapier.com/hooks/catch/your-webhook-id
# Secret for HMAC signature verification (optional but recommended)
# WEBHOOK_SECRET=your-random-secret-string
#
# Events sent:
# - license.activated: When a license is activated on a device
# - license.created: When a new license is generated
# - usage.limit_reached: When usage hits 80% of limit

# ==========================================
# Tier Configuration
# ==========================================
# Path to tiers configuration file (default: tiers.toml)
# TIERS_CONFIG_PATH=tiers.toml

# Usage:
# 1. Copy this file to .env
# 2. Generate keypair: make keygen
# 3. Copy private key to PRIVATE_KEY above
# 4. (Optional) Customize tiers in tiers.toml
#
# For direct mode (default):
#   5. Add your protected API key to PROTECTED_API_KEY
#
# For proxy mode (enhanced security):
#   5. Set PROXY_MODE=true
#   6. Add API keys: OPENAI_API_KEY, ANTHROPIC_API_KEY
#   7. Clients will call /proxy/openai/* or /proxy/anthropic/*
#
# 8. Choose database: keep DB_PATH for SQLite OR set DATABASE_URL for PostgreSQL
# 9. Update FROM_EMAIL if using custom domain
# 10. Run: source .env && make server
